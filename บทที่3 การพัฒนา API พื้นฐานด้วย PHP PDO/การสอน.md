## แนวคิดการสอน
การสอนจะใช้แนวทาง **ปฏิบัติควบคู่ทฤษฎี** โดยแบ่งเป็น 4 ขั้นตอน
1. **แนะนำ RESTful API** อธิบายแนวคิดและ HTTP Methods
2. **ขยายฐานข้อมูล** นำนักเรียนออกแบบและสร้างตารางใหม่
3. **พัฒนา API** สร้าง Endpoint สำหรับตารางทั้งหมด
4. **ทดสอบและปรับปรุง** ใช้ Thunder Client ทดสอบและดีบัก

### โครงสร้างการสอน
- **ระยะเวลา** 6 ชั่วโมง (3 ครั้ง ครั้งละ 2 ชั่วโมง)
- **เครื่องมือ**
  - XAMPP (PHP 8.2, Apache, MySQL)
  - Visual Studio Code (PHP Intelephense, Thunder Client)
  - phpMyAdmin
- **ผลลัพธ์ที่คาดหวัง**
  - นักเรียนเข้าใจและสร้าง RESTful API ได้
  - ขยายฐานข้อมูลและพัฒนา Endpoint สำหรับตารางใหม่
  - ทดสอบ API และจัดการข้อผิดพลาดได้

## การสอนในชั้นเรียน

### ครั้งที่ 1: แนวคิด RESTful API และการขยายฐานข้อมูล (2 ชั่วโมง)
1. **แนะนำ RESTful API** (30 นาที):
   - อธิบายแนวคิด REST, HTTP Methods, และ JSON
   - แสดงตัวอย่าง Header (`Content-Type: application/json`) และ HTTP Status Codes (200, 201, 400, 404, 500)
2. **ขยายฐานข้อมูล** (60 นาที):
   - ให้นักเรียนวาด ER Diagram สำหรับตารางใหม่ (`addresses`, `payments`, `reviews`)
   - รัน SQL ใน phpMyAdmin เพื่อสร้างตารางและเพิ่มข้อมูลตัวอย่าง
3. **มอบหมายงาน** (30 นาที):
   - ให้นักเรียนออกแบบ Endpoint สำหรับ `addresses`, `payments`, และ `reviews`

### ครั้งที่ 2: พัฒนา API สำหรับตารางใหม่ (2 ชั่วโมง)
1. **พัฒนา API** (90 นาที):
   - สอนการเขียน `addresses.php`, `payments.php`, และ `reviews.php`
   - อธิบายการใช้ `bindParam` และ `json_decode`
   - แบ่งกลุ่มพัฒนา Endpoint สำหรับแต่ละตาราง
2. **ทดสอบเบื้องต้น** (30 นาที):
   - ใช้ Thunder Client ทดสอบ Endpoint เช่น `POST /api/addresses`, `GET /api/reviews`

### ครั้งที่ 3: ทดสอบและปรับปรุง API (2 ชั่วโมง)
1. **ทดสอบ API** (60 นาที):
   - ให้นักเรียนทดสอบทุก Endpoint ด้วย Thunder Client
   - ตัวอย่าง Request/Response:
     - **POST /api/addresses**:
       ```json
       {
           "user_id": 1,
           "address_line": "789 New St",
           "city": "Phuket",
           "postal_code": "83100",
           "country": "Thailand"
       }
       ```
       **Response**: `{"message": "Address created successfully"}` (201)
     - **GET /api/reviews**:
       **Response**:
       ```json
       [
           {"id": 1, "product_id": 1, "user_id": 1, "rating": 5, "comment": "Great laptop!"},
           {"id": 2, "product_id": 2, "user_id": 1, "rating": 4, "comment": "Good smartphone."}
       ]
       ```
2. **ปรับปรุงและดีบัก** (60 นาที):
   - สอนการตรวจสอบ log (`F:\xampp\php\logs\php_error_log`)
   - อภิปรายวิธีป้องกัน SQL Injection และการปรับปรุงประสิทธิภาพ

## แบบฝึกหัด
1. **ออกแบบ Endpoint**:
   - ออกแบบ Endpoint `GET /api/users/{id}/addresses` เพื่อดึงที่อยู่ของผู้ใช้
2. **เขียนโค้ด**:
   - เพิ่ม DELETE Endpoint ใน `payments.php`
   - สร้าง Endpoint `GET /api/products/{id}/reviews` เพื่อดึงรีวิวของสินค้า
3. **เติมโค้ด**:
   ```php
   $data = json_decode(_____, true);
   $sql = "INSERT INTO reviews (product_id, user_id, rating, comment) VALUES (:product_id, :user_id, :rating, :comment)";
   $stmt = $conn->____($sql);
   $stmt->bindParam('_____', $product_id, PDO::PARAM_INT);
   ```
